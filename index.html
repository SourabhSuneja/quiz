<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz</title>
<style>
  body {
    background-color: black;
    color: white;
    font-family: Arial, sans-serif;
    font-size: 18px;
  }
  .container {
    max-width: 600px;
    margin: 50px auto;
    padding: 20px;
    border: 2px solid white;
    border-radius: 10px;
    text-align: center;
  }
  h1 {
    text-align: center;
    font-size: 24px;
  }
  .question {
    margin-bottom: 20px;
    font-size: 20px;
  }
  .buttons {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
  }
  button {
    margin: 10px;
    padding: 10px 20px;
    background-color: #1E90FF; /* Dark blue shade */
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
    font-size: 18px;
  }
  button:hover {
    background-color: #4682B4; /* Lighter shade on hover */
  }
  footer {
    margin-top: 20px;
    font-size: 14px;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Quiz</h1>
  <div class="question">
    <p id="questionText"></p>
    <p id="studentName"></p>
  </div>
  <div class="buttons">
    <button id="correctBtn" onclick="answeredCorrectly()">Answered correctly</button>
    <button id="incorrectBtn" onclick="answeredIncorrectly()">Couldn't answer correctly</button>
    <button id="pickAnotherBtn" onclick="pickAnotherStudent()">Pick another student</button>
  </div>
  <footer id="footerText"></footer>
</div>

<script>
  // Array of student names
  const students = [
    "Aanya Sharma", "Aryan Sharma", "Atharva Sharma", "Bhavya Choudhary", "Chitransh Agrawal",
    "Devansh Ratnu", "Devanshi Sharma", "Dipanshu Choudhary", "Gourav Saini", "Harsh", "Harshita",
    "Hemal Kanwar", "Himanshu Yadav", "Ishika Meena", "Jaanvi", "Jigyasa Sharma", "Karan Choudhary",
    "Kartikay Sharma", "Keshav Vyas", "Krishna Meena", "Krishna Saini", "Kunal Jangid", "Kushagra Singh",
    "Madhavi Kumawat", "Manas Jangid", "Pari Yadav", "Pradhuman Singh", "Pranjal Singh Meena",
    "Reyansh Jangir", "Rishabh", "Ritu Rarh", "Riya Sharma", "Safal Kumawat", "Sameer",
    "Shivam Sharma", "Sidarth", "Suhana Budania", "Supriya Yadav", "Vatsal Dhinwa", "Vihaan Choudhary",
    "Vihan Chhabarwal", "Yashasvi Kumawat"
  ];

  // Array to store scores
  let scores = {};

  // Array to store absent students
  let absentStudents = [];

  // Index to keep track of current question
  let currentQuestionIndex = 0;

  // Function to initialize quiz
  function initializeQuiz() {
    loadQuestions();
  }

  // Function to load questions from a text file using AJAX
  function loadQuestions() {
    const xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
      if (xhr.readyState === XMLHttpRequest.DONE) {
        if (xhr.status === 200) {
          const questionsText = xhr.responseText;
          const questionsArray = questionsText.split('\n').map(question => question.trim()).filter(question => question !== '');
          startQuiz(questionsArray);
        } else {
          console.error("Failed to load questions");
        }
      }
    };
    xhr.open("GET", "questions.txt", true);
    xhr.send();
  }

  // Function to start the quiz after questions are loaded
  function startQuiz(questions) {
    // Set the loaded questions
    window.questions = questions;
    displayQuestion();
  }

  // Function to display question and student name
  function displayQuestion() {
    const questionText = document.getElementById("questionText");
    const studentName = document.getElementById("studentName");
    questionText.textContent = window.questions[currentQuestionIndex];
    let randomStudent = pickRandomStudent();
    studentName.textContent = "Question for " + randomStudent;
  }

  // Function to pick a random student, ensuring they are not absent
  function pickRandomStudent() {
    let randomStudentIndex;
    do {
      randomStudentIndex = Math.floor(Math.random() * students.length);
      var randomStudent = students[randomStudentIndex];
    } while (absentStudents.includes(randomStudent));
    return randomStudent;
  }

  // Function to handle correct answer
  function answeredCorrectly() {
    const currentStudent = document.getElementById("studentName").textContent.split(" ")[2];
    if (scores[currentStudent] === undefined) {
      scores[currentStudent] = 1;
    } else {
      scores[currentStudent]++;
    }
    nextQuestion();
  }

  // Function to handle incorrect answer
  function answeredIncorrectly() {
    nextQuestion();
  }

  // Function to pick another student
  function pickAnotherStudent() {
    displayQuestion();
  }

  // Function to move to the next question
  function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < window.questions.length) {
      displayQuestion();
    } else {
      displayScores();
    }
  }

  // Function to display scores
  function displayScores() {
    const container = document.querySelector(".container");
    container.innerHTML = "<h1>Scores</h1>";
    for (const student in scores) {
      container.innerHTML += "<p>" + student + ": " + scores[student] + "</p>";
    }
    container.innerHTML += "<footer id='footerText'>Powered by Sourabh Suneja</footer>";
  }

  // Initialize quiz when the page loads
  window.onload = initializeQuiz;
</script>

</body>
</html>